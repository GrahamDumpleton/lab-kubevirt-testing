In order to map hostnames to IP address DNS is used. Linux operating systems
usually come installed with a local DNS resolver as part of `systemd` to allow
locally running applications to access DNS via the D-Bus interface. For our
Kubernetes cluster we do not need this capability. It is therefore necessary to
disable `systemd-resolved` and reconfigure DNS to a more default configuration.

To disable `systemd-resolved` on Fedora Linux run:

```terminal:execute-all
command: sudo systemctl disable --now systemd-resolved
```

This should output:

```
Removed "/etc/systemd/system/dbus-org.freedesktop.resolve1.service".
Removed "/etc/systemd/system/sysinit.target.wants/systemd-resolved.service".
```

We now need to re-configure the network manager service to have DNS use the
default resolution chain.

```terminal:execute-all
command: sudo sed -i '/^\[main\]/a dns=default' /etc/NetworkManager/NetworkManager.conf
```

This should result in the network manager package configuration file looking
like:

```
[main]
dns=default
```

We also need to delete the existing `/etc/resolv.conf` file that was generated
by `systemd-resolved`.

```terminal:execute-all
command: |-
   unlink /etc/resolv.conf
   touch /etc/resolv.conf
```

As these changes affect DNS lookups we need to reboot the operating system
at this point.

```terminal:execute-all
command: reboot
```

After the reboot, the `/etc/resolv.conf` file should be replaced with one
generated by the network manager package.
